\section[红黑树]{红黑树}
本节参考\href{http://zh.wikipedia.org/wiki/红黑树}{网页}。

红黑树是在二叉搜索树(Binary Search Tree, BST)的基础上增加一些性质，
从而达到自动平衡的平衡二叉搜索树(Balancing Binary Search Tree)。
它在二叉搜索树的基础上增加了如下性质，
\begin{enumerate}
  \item 节点是红色或者黑色
  \item 根节点是黑色
  \item 叶子节点是黑色(叶子节点都是NULL节点)
  \item 红色节点的两个子节点都是黑色的\\
  (即，根节点到叶子节点的路径上不能出现两个连续的红色节点)
  \item 任一节点到其每个叶子节点的简单路径包含相同数量的黑色节点
\end{enumerate}
如何理解这些性质？红黑树是为了克服BST无法自动平衡这一缺点而提出的，
所以它所增加的性质都是为了平衡性，
\begin{itemize}
  \item 前三个性质很好理解：所有节点非红即黑，上底(根节点)、下底(叶子节点)都是黑的
  \item 为了保持平衡，我们规定任一节点到每个叶子节点的简单路径有相同数量的黑色节点，
  但是这样还无法达到平衡，因为我们可以无限制的增加红色节点，所有再增加一条性质，
  \item 不能有连续存在的红色节点，这样最长路径最多是最短路径的两倍长，整棵树大致平衡。
\end{itemize}
注意：红黑树中的叶子节点指的是最末端的NULL节点。

\subsection[插入算法实现]{插入算法实现}
红黑树本质上是BST，所以插入操作首先按照BST进行插入，然后调整使之再次平衡，下面只关注如何调整。
由于任一节点到其每个叶子节点的简单路径上，黑色节点数量是相同的，所以在插入节点时
总是把新节点设置为红色，这样避免对数的结构进行调整。插入时一般分五种情况进行讨论，
\begin{enumerate}
  \item 整棵树是空的，插入的新节点作为根节点
  \item 新节点的父节点是黑色的
  \item 新节点的父节点是红色的，Uncle节点也是红色的
  \item 新节点的父节点是红色的，Uncle节点是黑色的，并且祖父节点、父节点、新节点\\
  三者是“左右”或者“右左”关系
  \item 新节点的父节点是红色的，Uncle节点是黑色的，并且祖父节点、父节点、新节点\\
  三者是“左左”或者“右右”关系
\end{enumerate}
为何会分次五种情况呢？其实这些分类是递增的，
\begin{enumerate}
  \item 新节点与其他节点没有关系(没有其他节点)
  \item 父子关系
  \item 父节点、Uncle节点、新节点之间的关系
  \item 祖父节点、父节点、新节点之间的关系(左右、右左关系)
  \item 祖父节点、父节点、新节点之间的关系(左左、右右关系)
\end{enumerate}
下面逐个情况分析对策，默认新节点颜色为红色。
\subsubsection[新节点即为根节点]{新节点即为根节点}
树是空的，所以新节点即为根节点，此时只需将新节点颜色改为黑色即可满足所有性质。

\subsubsection[父-子关系]{父-子关系}
父节点是黑色的，新节点是红色的，大家相安无事，所有性质都满足，无需任何额外操作。

\subsubsection[父-叔-子关系]{父-叔-子关系}
父节点和Uncle节点都是红色的，此时祖父节点一定是黑色的(否则之前就不是红黑树)，
新节点跟父节点是连续的红色，跟性质4冲突。

我们的对策是：\\
祖父节点黑色=>红色，父节点、Uncle节点红色=>黑色，这样所有经过祖父节点的子树
仍然满足红色节点数相等(因为这些路径必定经过父节点或者Uncle节点，路径中两个节点
颜色同时翻转，黑色节点总量不变)。

但是祖父节点的父节点有可能是红色的啊，我们从祖父节点开始递归整个调整操作，
这相当于把祖父节点作为新插入的红色节点，重新进行调整。

\subsubsection[祖-父-子关系(双旋)]{祖-父-子关系(双旋)}
此时Uncle节点是黑色的，我们的调整跟他没啥关系了，我们把焦点放到祖-父-子关系上，
三者有可能是“左右”关系(即父节点是祖父节点的左子节点，新节点是父节点的右子节点)
或者“右左”关系，此时需要两次旋转来达到平衡，不过我们把一次旋转放到下一种关系中，
毕竟有些直接就是左左或者右右关系，这样就不用重复操作了。

我们的对策：\\
左右关系进行一次左旋，形成左左关系；\\
右左关系进行一次右旋，形成右右关系。

然后进入下一个情形。

\subsubsection[祖-父-子关系(单旋)]{祖-父-子关系(单旋)}
这里的情形就是“左左”或者“右右”关系，只需一次单旋，然后互换祖父节点和父节点的颜色，
所有性质再次满足。

\subsection[删除算法实现]{删除算法实现}

\subsection[时间复杂度分析]{时间复杂度分析}